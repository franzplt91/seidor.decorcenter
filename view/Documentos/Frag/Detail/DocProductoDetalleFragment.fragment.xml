<core:FragmentDefinition 
    xmlns:core="sap.ui.core" 
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m"
    xmlns:l="sap.ui.layout" 
    xmlns:f="sap.ui.layout.form"
    xmlns:t="sap.ui.table" 
    xmlns:s="sap.m.semantic" 
    xmlns:custom="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    
    <s:DetailPage title="Detalle Producto" id="pagDocNuevo_productos_lista1">
        <s:content>
            

            <IconTabBar id="tabDetalleProducto" expandable="false" headerMode="Inline" upperCase="false" expanded="{device&gt;/isNoPhone}" class="sapUiResponsiveContentPadding">
                <items>
                    <IconTabFilter text="Detalle Material 1">

                        <f:Form editable="true">
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    labelSpanXL="12"
                                    labelSpanL="12"
                                    labelSpanM="12"
                                    labelSpanS="12"
                                    adjustLabelSpan="false"
                                    emptySpanXL="0"
                                    emptySpanL="0"
                                    emptySpanM="0"
                                    emptySpanS="0"
                                    columnsXL="4"
                                    columnsL="4"
                                    columnsM="4"
                                    singleContainerFullSize="false" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Posición">
                                            <f:fields>
                                                <Input width="100%" value="{/material/Posicion}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                    </f:formElements>
                                </f:FormContainer>

                                <f:FormContainer>
                                    <f:FormElement label="Código">
                                            <f:fields>
                                                <Input width="100%" value="{/material/CodMaterialCorto}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>


                        <f:Form editable="true">
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    labelSpanXL="12"
                                    labelSpanL="12"
                                    labelSpanM="12"
                                    labelSpanS="12"
                                    adjustLabelSpan="false"
                                    emptySpanXL="0"
                                    emptySpanL="0"
                                    emptySpanM="0"
                                    emptySpanS="0"
                                    columnsXL="3"
                                    columnsL="3"
                                    columnsM="3"
                                    singleContainerFullSize="false" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:formElements>
                                         <f:FormElement label="Descripción">
                                            <f:fields>
                                                <Input width="100%" value="{/material/DescMaterial}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Cantidad">
                                            <f:fields>
                                                <Input width="100%" value="{/material/Cantidad}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                    </f:formElements>
                                </f:FormContainer>

                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Unidad de Medida">
                                            <f:fields>
                                                <Input width="100%" value="{/material/CodUMedida}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Unidad de Rendimiento">
                                            <f:fields>
                                                <Input width="100%" value="{/material/Rendimiento}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                    </f:formElements>
                                </f:FormContainer>

                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Centro/Almacen/Lote">
                                            <f:fields>
                                                <Input width="100%" value="{/material/CodCentro} / {/material/CodAlmacen} /"  enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Flete">
                                            <f:fields>
                                                <CheckBox selected="{/material/Zservicio}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </CheckBox>
                                            </f:fields>
                                        </f:FormElement>
                                    </f:formElements>
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>
                    </IconTabFilter>

                    <IconTabFilter text="Detalle Material 2">

                        <f:Form editable="true">
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    labelSpanXL="12"
                                    labelSpanL="12"
                                    labelSpanM="12"
                                    labelSpanS="12"
                                    adjustLabelSpan="false"
                                    emptySpanXL="0"
                                    emptySpanL="0"
                                    emptySpanM="0"
                                    emptySpanS="0"
                                    columnsXL="4"
                                    columnsL="4"
                                    columnsM="4"
                                    singleContainerFullSize="false" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Peso">
                                            <f:fields>
                                                <Input width="100%" value="{/material/Peso}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                    </f:formElements>
                                </f:FormContainer>
                                
                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Peso Total">
                                            <f:fields>
                                                <Input width="100%" value="{/material/PesoNeto}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>                                        
                                    </f:formElements>                                    
                                </f:FormContainer>

                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Precio Unitario">
                                            <f:fields>
                                                <Input width="100%" value="{/material/PrecioUnitario}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>                                        
                                    </f:formElements>                                    
                                </f:FormContainer>

                                <f:FormContainer>
                                    <f:formElements>
                                            <f:FormElement label="Descuentos">
                                            <f:fields>
                                                <Input width="100%" value="{/material/DesGrupoMat}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                    </f:formElements>                                
                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>

                        <f:Form editable="true">
                            <f:layout>
                                <f:ResponsiveGridLayout
                                    labelSpanXL="12"
                                    labelSpanL="12"
                                    labelSpanM="12"
                                    labelSpanS="12"
                                    adjustLabelSpan="false"
                                    emptySpanXL="4"
                                    emptySpanL="4"
                                    emptySpanM="4"
                                    emptySpanS="0"
                                    columnsXL="3"
                                    columnsL="3"
                                    columnsM="3"
                                    singleContainerFullSize="false" />
                            </f:layout>
                            <f:formContainers>
                                <f:FormContainer>
                                    <f:formElements>                        
                                        <f:FormElement label="Sub Total">
                                            <f:fields>
                                                <Input width="100%" placeholder="" value="{/material/SubTotal}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Input>
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Repartos">
                                            <f:fields>
                                                <DatePicker valueFormat="YYYY-MM-dd" displayFormat="short"
                                                    value="{/material/Reparto}" enabled="{/pedido/enabled}">
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </DatePicker>
                                            </f:fields>
                                        </f:FormElement>
                                                                            
                                    </f:formElements>
                                </f:FormContainer>

                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Ambiente">
                                            <f:fields>
                                                <Select items="{ path : '/dataIni/lstPreguntas/5/listaResp' }" selectedKey="{/material/Ambiente}" maxwidth="100%" required="true" enabled="{/pedido/enabled}">
                                                        <core:Item key="{Codigo}" text="{Descripcion}"/>
                                                        <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Select>
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Opción Ambiente">
                                            <f:fields>
                                                <Select maxwidth="100%" required="true" selectedKey="{/material/Opcion}" enabled="{/pedido/enabled}">
                                                    <core:Item key="01" text="01"/>
                                                    <core:Item key="02" text="02"/>
                                                    <core:Item key="03" text="03"/>
                                                    <core:Item key="04" text="04"/>
                                                    <core:Item key="05" text="05"/>
                                                    <core:Item key="06" text="06"/>
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Select>
                                            </f:fields>
                                        </f:FormElement>                                        
                                    </f:formElements>
                                </f:FormContainer>

                                <f:FormContainer>
                                    <f:formElements>
                                        <f:FormElement label="Motivo de Rechazo">
                                            <f:fields>
                                                <Select  items="{ path : '/dataIni/lstMotivosRechazo' }" change="onSeleccionaSurtido" maxwidth="100%" required="true" selectedKey="{/material/MotivoRechazo}" enabled="{/pedido/enabled}">
                                                    <core:Item key="{Codigo}" text="{= ${Codigo} === ' '? 'Seleccione' : ${Descripcion} }"/>
                                                    <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                                </Select>
                                            </f:fields>
                                        </f:FormElement>
                                        <f:FormElement label="Prioridad">
                                            <f:fields>
                                                <Select  items="{ path : '/dataIni/lstCondExp' }" change="onSeleccionaSurtido" maxwidth="100%" required="true" selectedKey="{/material/PrioridadEntrega}" enabled="{/pedido/enabled}">
                                                <core:Item key="{Codigo}" text="{= ${Codigo} === ''? 'Seleccione' : ${Descripcion} }"/>
                                                <layoutData>
                                        <l:GridData span="L12 M12 S12"/>
                                    </layoutData>
                                            </Select>
                                            </f:fields>
                                        </f:FormElement>                                        
                                    </f:formElements>

                                </f:FormContainer>
                            </f:formContainers>
                        </f:Form>
                    </IconTabFilter>

                    <IconTabFilter text="Descuento">
                       
                        <Table id="idDescuentoPrincipal"
                            inset="false"
                            items="{
                                path: '/material/DescuentoPrincipal',
                                sorter: {
                                    path: 'Condicion'
                                }
                            }">
                            <headerToolbar>
                                <Toolbar>
                                    <Title text="Descuentos Principales" level="H2"/>
                                </Toolbar>
                            </headerToolbar>
                            <columns>
                                <Column
                                    width="40%"
                                    hAlign="left">
                                    <Text text="Condicion - Denominacion" />
                                </Column>                                
                                <Column
                                    hAlign="Center">
                                    <Text text="Maximo" />
                                </Column>
                                <Column
                                    hAlign="Center">
                                    <Text text="Porcentaje" />
                                </Column>
                                <Column
                                    hAlign="Center">
                                    <Text text="Valor de Descuento" />
                                </Column>
                                <Column
                                    hAlign="Center">
                                    <Text text="Posicion" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <Text
                                            text="{Condicion} - {Denominacion}" />
                                        <Text
                                            text="{LimiteInferior} %" />
                                        <Text
                                            text="{Importe} %" />                                            
                                        <Text
                                            text="{Valor}" />
                                        <Text
                                            text="{/material/PosicionCorto}" />                                            
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                        
                        <VBox class="sapUiSmallMargin">
                        <Table id="idDescuentoOtros"
                            inset="false"
                            items="{
                                path: '/material/DescuentoOtros',
                                sorter: {
                                    path: 'Condicion'
                                }
                            }">
                            <headerToolbar>
                                <Toolbar>
                                    <Title text="Otros Descuentos" level="H2"/>
                                </Toolbar>
                            </headerToolbar>
                            <columns>
                                <Column
                                    width="40%"
                                    hAlign="left">
                                    <Text text="Condicion - Denominacion" />
                                </Column>                                
                                <Column
                                    hAlign="Center">
                                    <Text text="Maximo" />
                                </Column>
                                <Column
                                    hAlign="Center">
                                    <Text text="Porcentaje" />
                                </Column>
                                <Column
                                    hAlign="Center">
                                    <Text text="Valor de Descuento" />
                                </Column>
                                <Column
                                    hAlign="Center">
                                    <Text text="Posicion" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <Text
                                            text="{Condicion} - {Denominacion}" />
                                        <Text
                                            text="{LimiteInferior} %" />
                                        <Text
                                            text="{Importe} %" />                                            
                                        <Text
                                            text="{Valor}" />
                                        <Text
                                            text="{/material/PosicionCorto}" />                                            
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>   
                        </VBox>    
                    </IconTabFilter>

                    <IconTabFilter text="Centro/Almacen/Lote">
                        <List  mode="SingleSelectMaster" growing="false" growingThreshold="30" growingDirection="Upwards" busyIndicatorDelay="200"
                              enableBusyIndicator="false" growingTriggerText="Previous Products" noDataText="No hay Centro/Almacen/Lote" 
                              itemPress=""  
                              items="{
                        path : '/listaMatAnadido',
                                sorter : {
                                    path : 'DescMaterial',
                                    group : false
                                }
                        }"
                >
                    <items>
                        <ObjectListItem
                            title="{CodMaterial}"
                            number="Peso: {Peso}"
                            numberUnit="Precio: {PrecioUnit} Stock: {Stock}{CodUMedida}"
                            numberState=""
                            type="Navigation"
                            press=""
                            custom:to="">
                            <firstStatus>
                                <ObjectStatus text="Descontinuado: {Descontinuado}"/>
                            </firstStatus>
                        </ObjectListItem>
                    </items>
                </List>
                    </IconTabFilter>


                    <IconTabFilter text="Reparto">
                        <List  mode="SingleSelectMaster" growing="false" growingThreshold="30" growingDirection="Upwards" busyIndicatorDelay="200"
                              enableBusyIndicator="false" growingTriggerText="Previous Products" noDataText="No hay Productos"  
                              itemPress="onOpenRepartoDetail"  
                              items="{
                                path : '/material/Repartos',
                                        sorter : {
                                            path : 'FechaEntrega',
                                            group : false
                                                }
                                        }">
                            <items>
                                <ObjectListItem
                                    title="Fecha Entrega: { 
                                        path: 'FechaEntrega',
                                        formatter: '.formatter.dateFormater' }"  
                                    type="Navigation"
                                    press=""
                                    custom:to="">
                                <attributes>                            
                                    <ObjectAttribute text="Cantidad: {CantPed}" />
                                </attributes>
                                </ObjectListItem>
                            </items>
                        </List>
                    </IconTabFilter>

                    <IconTabFilter text="Catálogo">
                        <Panel>
                            <FlexBox
                                height="100%"
                                alignItems="Start"
                                justifyContent="Center">
                                <!--    
                                  <Image
                                        src="{/material/link}"
                                        densityAware="false"
                                        description="{/material/DescMaterial}"
                                        alt="{/material/DescMaterial}"
                                        width="480px" >
                                    </Image>                     
                                     -->
                                    <Image
                                        src="https://http2.mlstatic.com/ceramica-piso-rustica-primera-simil-laja-interior-exterior-D_NQ_NP_955701-MLA20380982757_082015-F.jpg"
                                        densityAware="false"                                        
                                        alt="{/material/DescMaterial}"
                                        width="580px" >
                                    </Image>
                            </FlexBox>
                        </Panel>                        
                    </IconTabFilter>

                    <IconTabFilter text="Stock Por Llegar" key="filterStockPorLlegar">
                        <Panel>
                            <FlexBox
                                height="100%"
                                alignItems="Start"
                                justifyContent="Center">

                                <Table 
                        inset="false"
                        items="{
                            path: '/retornoStockPorLlegar/lstStockCurso'  }">
                        <columns>
                            <Column
                                width="12em">
                                <Text text="Fecha" />
                            </Column>
                            <Column
                                width="12em">
                                <Text text="Material" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true">
                                <Text text="Descripción" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Right">
                                <Text text="UM" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Disponibilidad" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <ObjectIdentifier
                                        title="{LFDAT}"
                                        text="{ProductId}"/>
                                    <Text
                                        text="{MATNR}" />
                                    <Text
                                        text="{MAKTX}" />
                                        <Text
                                        text="{MEINS}" />
                                        <Text
                                        text="{MENGE}" />
                                    
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>

                            </FlexBox>
                        </Panel>                        
                    </IconTabFilter>

                    <IconTabFilter text="Stock Por Pedir" key="filterStockPorPedir">
                        <Panel>
                            <FlexBox
                                height="100%"
                                alignItems="Start"
                                justifyContent="Center">

                                <Table 
                        inset="false"
                        items="{
                            path: '/retornoStockPorPedir/lstReporteMercaderia'  }">
                        <columns>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Fecha" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Material" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Marca" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Jerarquia 1" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Jerarquia 2" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Jerarquia 3" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Jerarquia 4" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Cantidad y UM" />
                            </Column>
                            <Column
                                minScreenWidth="Tablet"
                                demandPopin="true"
                                hAlign="Center">
                                <Text text="Tipo Stock" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <ObjectIdentifier
                                        title="{EINDT}"
                                        text="{MES}"/>
                                        <Text
                                        text="{MATNR} - {TXZ01}" />
                                        <Text
                                        text="{MARCA}" />
                                        <Text
                                        text="{VTEXT1}" />
                                        <Text
                                        text="{VTEXT2}" />
                                        <Text
                                        text="{VTEXT3}" />
                                        <Text
                                        text="{VTEXT4}" />
                                        <Text
                                        text="{MENGE} {MEINS}" />
                                        <ObjectIdentifier
                                        title="{TEXTO_INSMK}"
                                        text="{STOCK}"/>
                                        
                                    
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>

                            </FlexBox>
                        </Panel>                        
                    </IconTabFilter>

                </items>
            </IconTabBar>
        </s:content>
        
        <s:customFooterContent>
                    <Button icon="sap-icon://refresh" tooltip="" text="" press="onBtnRefresh" visible="{/pedido/enabledBtn}"></Button>
                </s:customFooterContent>
    </s:DetailPage>

</core:FragmentDefinition>